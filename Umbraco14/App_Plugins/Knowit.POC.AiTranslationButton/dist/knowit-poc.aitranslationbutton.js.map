{"version":3,"file":"knowit-poc.aitranslationbutton.js","sources":["../src/ai-translation-button-action.ts"],"sourcesContent":["import type {UmbControllerHost} from '@umbraco-cms/backoffice/controller-api';\nimport {UmbWorkspaceActionBase} from '@umbraco-cms/backoffice/workspace';\nimport {UMB_DOCUMENT_WORKSPACE_CONTEXT} from \"@umbraco-cms/backoffice/document\";\n\nexport class UmbDocumentAiButtonWorkspaceAction extends UmbWorkspaceActionBase {\n\n  _contentInfo: any;\n   _showButton = false;\n   _data: any;\n  workspaceContext: any;\n  constructor(host: UmbControllerHost, args: any) {\n    super(host, args);\n    this.disable();\n    this.workspaceContext = this.getContext(UMB_DOCUMENT_WORKSPACE_CONTEXT)\n        .then((context) => {\n          this._data = context.getData();\n          this.#isTranslatable().then(() => {\n            if (this._showButton) {\n              this.enable();\n            }\n          });\n        });\n  }\n\n  #translate = async () => {\n    var response = await fetch(\"/api/ai/content-translate/\" + this._data.unique);\n    this._contentInfo = await response.json();\n  }\n\n  #isTranslatable = async () => {\n    const response = await fetch(\"/api/ai/content-is-translatable/\" + this._data.unique);\n    const data = await response.json();\n    this._showButton = data.isTranslatable;\n  }\n\n  async execute() {\n    await this.#translate();\n  }\n}\n\nexport { UmbDocumentAiButtonWorkspaceAction as api };"],"names":["UmbDocumentAiButtonWorkspaceAction","UmbWorkspaceActionBase","host","args","__privateAdd","_translate","_isTranslatable","__privateSet","response","data","UMB_DOCUMENT_WORKSPACE_CONTEXT","context","__privateGet"],"mappings":";;;;;;;;;;;;AAIO,MAAMA,UAA2CC,EAAuB;AAAA,EAM7E,YAAYC,GAAyBC,GAAW;AAC9C,UAAMD,GAAMC,CAAI;AAalB,IAAAC,EAAA,MAAAC,GAAA;AAKA,IAAAD,EAAA,MAAAE,GAAA;AAtBe,SAAA,cAAA,IAiBfC,EAAA,MAAAF,GAAa,YAAY;AACvB,UAAIG,IAAW,MAAM,MAAM,+BAA+B,KAAK,MAAM,MAAM;AACtE,WAAA,eAAe,MAAMA,EAAS,KAAK;AAAA,IAAA,IAG1CD,EAAA,MAAAD,GAAkB,YAAY;AAEtB,YAAAG,IAAO,OADI,MAAM,MAAM,qCAAqC,KAAK,MAAM,MAAM,GACvD;AAC5B,WAAK,cAAcA,EAAK;AAAA,IAAA,IApBxB,KAAK,QAAQ,GACb,KAAK,mBAAmB,KAAK,WAAWC,CAA8B,EACjE,KAAK,CAACC,MAAY;AACZ,WAAA,QAAQA,EAAQ,WAChBC,EAAA,MAAAN,GAAA,WAAkB,KAAK,MAAM;AAChC,QAAI,KAAK,eACP,KAAK,OAAO;AAAA,MACd,CACD;AAAA,IAAA,CACF;AAAA,EACP;AAAA,EAaA,MAAM,UAAU;AACd,UAAMM,EAAA,MAAKP,GAAL;AAAA,EACR;AACF;AAdEA,IAAA,eAKAC,IAAA;"}